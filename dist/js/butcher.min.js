/* generated: 2014-01-25 @ 14:05:59 */
!function(a){"use strict";var b="/",c="http://nodejsisata.co:8080";String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var d=a.module("butcher",["ngRoute","ui.bootstrap","dkCircles"]);d.config(["$routeProvider","$locationProvider","$httpProvider",function(a,c,d){c.html5Mode(!0),d.interceptors.push("intercept"),a.when(b,{templateUrl:b+"partials/about.html"}).when(b+":page",{templateUrl:function(a){return b+"partials/"+a.page+".html"}}).otherwise({redirectTo:b})}]),d.run(["$routeParams","$route","$rootScope","$http","$location","$timeout","$log",function(a,d,e,f,g){e.baseUrl=b,e.restUrl=c,e.alerts=[],f.defaults.headers.get={"Content-Type":"application/json"},e.$on("$routeChangeError",function(){g.replace().path(e.baseUrl)}),e.$on("$routeChangeStart",function(){e.alerts=[]})}])}(window.angular),function(a){"use strict";a.module("butcher").controller("AlertsCtrl",["$scope","$rootScope","$log",function(a,b,c){c.log("AlertsCtrl is running."),a.closeAlert=function(a){b.alerts.splice(a,1)},a.$watch(function(){return b.alerts},function(){a.alerts=b.alerts})}])}(window.angular,document),function(a,b){"use strict";a.module("butcher").controller("CoreStatsCtrl",["$scope","$log","$timeout","meat",function(a,c,d,e){c.log("CoreStatsCtrl is running.");var f=function(a){for(var c=[],d=[],e=[],f=[],g=0;24>g;g++)"meatspace.incoming"===a[g].topic&&(c.push(a[g].total),d.push(a[g].uniques)),"meatspace.outgoing"===a[g].topic&&(e.push(a[g].total),f.push(a[g].uniques));b("#meatspace-incoming-total").peity("bar",{width:200,height:50}).text(c.join(",")).change(),b("#meatspace-incoming-uniques").peity("bar",{width:200,height:50}).text(d.join(",")).change(),b("#meatspace-outgoing-total").peity("bar",{width:200,height:50}).text(e.join(",")).change(),b("#meatspace-outgoing-uniques").peity("bar",{width:200,height:50}).text(f.join(",")).change()};a.getMeat=function(){e.get(a.restUrl+"/stats",!1,!0,function(b){a.core_stats=b.data,f(b.data)})},a.getMeat()}])}(window.angular,window.jQuery),function(a){"use strict";a.module("butcher").controller("NavButtonsCtrl",["$scope","$routeParams","$log",function(a,b,c){c.log("NavButtonsCtrl is running."),a.$routeParams=b}])}(window.angular,window.jQuery),function(a){"use strict";a.module("butcher").controller("ParticipationStatsCtrl",["$scope","$routeParams","$log",function(a,b,c){c.log("ParticipationStatsCtrl is running."),a.int={},a.int.posters=82,a.int.lurkers=147,a.int.pRate=(a.int.posters/(a.int.posters+a.int.lurkers)*100).toFixed(2),a.bubbleData=[{counts:[[0,6],[1,70],[2,111],[3,203],[4,230],[5,180],[6,103],[7,140],[8,130],[9,203],[10,193],[11,123],[12,100]],name:"international"},{counts:[[5,1],[7,3],[8,4],[9,17],[0,10]],name:"french"},{counts:[[1,1],[3,2],[5,8],[7,13],[10,11]],name:"spanish"}]}])}(window.angular,window.jQuery),function(a,b,c){"use strict";a.module("butcher").directive("bblGraph",["$log",function(a){return{restrict:"A",replace:!1,scope:{bblData:"="},link:function(d,e,f){var g=function(){function a(a,b,c){return a.length>b&&(a=a.substring(0,b+1),a=a.substring(0,Math.min(a.length,a.lastIndexOf(" "))),a+=c),a}function g(){var a=b.select(this).node().parentNode;b.select(a).selectAll("circle").style("display","none"),b.select(a).selectAll("text.value").style("display","block")}function h(){var a=b.select(this).node().parentNode;b.select(a).selectAll("circle").style("display","block"),b.select(a).selectAll("text.value").style("display","none")}var i={top:20,right:200,bottom:0,left:20},j=parseInt(f.bblWidth,10),k=parseInt(f.bblHeight,10),l=parseInt(f.bblStartTime,10),m=parseInt(f.bblEndTime,10),n=b.scale.category10(),o=b.scale.linear().range([0,j]).domain([l,m]),p=b.svg.axis().scale(o).orient("top"),q=b.select(e[0]).append("svg").attr("width",j+i.left+i.right).attr("height",k+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.top+")"),r=b.scale.linear().domain([l,m]).range([0,j]);q.append("g").attr("class","x axis").attr("transform","translate(0,0)").call(p),c.each(d.bblData,function(c,d){var e=q.append("g").attr("class","journal"),f=e.selectAll("circle").data(d.counts).enter().append("circle"),i=e.selectAll("text").data(d.counts).enter().append("text"),k=b.scale.linear().domain([0,b.max(d.counts,function(a){return a[1]})]).range([2,9]);f.attr("cx",function(a){return r(a[0])}).attr("cy",20*c+20).attr("r",function(a){return k(a[1])}).style("fill",function(){return n(c)}),i.attr("y",20*c+25).attr("x",function(a){return r(a[0])-5}).attr("class","value").text(function(a){return a[1]}).style("fill",function(){return n(c)}).style("display","none"),e.append("text").attr("y",20*c+25).attr("x",j+20).attr("class","label").text(a(d.name,30,"...")).style("fill",function(){return n(c)}).on("mouseover",g).on("mouseout",h)})};d.bblData?(a.log(d.bblData),g()):d.$watch(function(){return d.bblData},function(a){a&&g()})}}}])}(window.angular,window.d3,window.jQuery),function(a){"use strict";a.module("butcher").factory("intercept",["$q","$rootScope","$log",function(b,c,d){d.log("intercept factory is running");var e={};return e.request=function(a){return a||b.when(a)},e.requestError=function(a){return b.reject(a)},e.response=function(a){return a||b.when(a)},e.responseError=function(e){for(var f=!1,g=a.fromJson(e.data),h=0;h<c.alerts.length;h++)if(c.alerts[h].status===e.status){f=!0;break}return f?c.alerts[h].count++:c.alerts.push({status:e.status,type:e.status<500?"warning":"error",msg:g&&g.Errors?g.Errors:"",url:e.config.url?e.config.url:!1,count:1}),d.log("intercept factory caught an error: "+e.status),b.reject(e)},e}])}(window.angular,document),function(a){"use strict";a.module("butcher").factory("meat",["$http","$rootScope","$log",function(a,b,c){c.log("meat factory is running");var d={},e=6e4;return d.get=function(b,c,d,f,g){return a({method:"GET",url:b,params:c,isArray:d,timeout:e}).then(function(a){f(a)},function(a){g&&g(a)})},d.read=d.get,d}])}(window.angular,document);